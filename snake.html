<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/addons/p5.sound.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>


        var snake;
        var blocks = 20;
        var food;


        function setup() {
            createCanvas(600, 600);
            snake = new Snake();
            frameRate(10);
            pickLocation();

        }

        function pickLocation() {
            var cols = floor(width / blocks);
            var rows = floor(height / blocks);

            food = createVector(random(floor(cols)), random(floor(rows)));
            food.mult(blocks);

        }

        function draw() {
            background(51);
            snake.update();
            snake.show();

            if (snake.eat(food)) {
                pickLocation();
            }


            fill(255, 0, 100);
            rect(food.x, food.y, blocks, blocks);
        }

        function keyPressed() {
            if (keyCode === UP_ARROW) {
                snake.dir(0, -1);
            } else if (keyCode === DOWN_ARROW) {
                snake.dir(0, 1);
            } else if (keyCode === RIGHT_ARROW) {
                snake.dir(1, 0);
            } else if (keyCode === LEFT_ARROW) {
                snake.dir(-1, 0);
            }
        }


        function Snake() {
            this.x = 0;
            this.y = 0;
            this.xspeed = 1;
            this.yspeed = 0;
            this.total=0;
            this.tail =[];

            this.update = function () {

                this.x = this.x + this.xspeed * blocks;
                this.y = this.y + this.yspeed * blocks;


                // Limits the snake to go off the canvas
                this.x = constrain(this.x, 0, width - blocks);
                this.y = constrain(this.y, 0, height - blocks);

            }

            this.eat = function (pos) {
                var d = dist(this.x, this.y, pos.x, pos.y);
                if (d < 20){
                    console.log("Ã±am");
                    total++;
                    return true; 
                }else{
                    return false;
                }
            }

            this.show = function () {
                fill(255);
                rect(this.x, this.y, blocks, blocks);
            }

            this.dir = function (x, y) {
                this.xspeed = x;
                this.yspeed = y;
            }
        }






















    </script>






</body>

</html>